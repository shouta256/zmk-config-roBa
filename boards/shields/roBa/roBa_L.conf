# NFC ピンを GPIO として利用（キースキャン用）。
CONFIG_NFCT_PINS_AS_GPIOS=y

# EC11 エンコーダを有効化（割り込みはグローバルスレッドで処理）。
CONFIG_EC11=y
CONFIG_EC11_TRIGGER_GLOBAL_THREAD=y

# スムーズスクロール用の input サブシステムを有効化。
CONFIG_INPUT=y

# バッテリー計測を有効化（中央側で集約）。
CONFIG_ZMK_BATTERY_REPORTING=y

# ポインティング機能（マウス/スクロール系）。
CONFIG_ZMK_POINTING=y

# === Bluetooth 接続安定化設定 ===
# 接続切断時にキーが押されっぱなしになる問題を防止。
CONFIG_ZMK_BLE_CLEAR_BONDS_ON_START=n

# ペリフェラル側はUSBを使わない。
CONFIG_ZMK_USB=n

# BLE 接続タイムアウトを長めに設定（安定性向上）。
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400

# 再接続の試行回数を増やす。
CONFIG_BT_CONN_TX_MAX=6

# === スプリット間の再接続設定（ペリフェラル側） ===
# アドバタイジング間隔を短くして再接続を速くする。
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=12

# 接続失敗時のリトライを有効化。
CONFIG_BT_GATT_ENFORCE_SUBSCRIPTION=n

# キーリリースを確実に送信。
CONFIG_ZMK_BLE_CONSUMER_REPORT_QUEUE_SIZE=8
CONFIG_ZMK_BLE_KEYBOARD_REPORT_QUEUE_SIZE=20

# 省電力モードのタイムアウト（分）。
CONFIG_ZMK_IDLE_TIMEOUT=30000
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=900000
